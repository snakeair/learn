# JS学习——正则表达式

正则表达式，我们可是一使用*//*表示也可以使用*RegExp*表示。，我们推荐使用后者。RegExp可以传入第二个参数。我们在验证的时候有两种方式

> 1. 正则对象的方法：将字符串作为参数，比如`regex.test(string)`。
> 2. 字符串对象的方法：将正则对象作为参数，比如`string.match(regex)`。

## 正则对象的属性和方法

### 属性

正则对象有两种属性，一种是查找是否设置修饰符的

> 1. **ignoreCase**：返回一个布尔值，表示是否设置了i修饰符，该属性只读。
> 2. **global**：返回一个布尔值，表示是否设置了g修饰符，该属性只读。
> 3. **multiline**：返回一个布尔值，表示是否设置了m修饰符，该属性只读。

另外一种是：

> 1. `lastIndex`：返回下一次开始搜索的位置。该属性可读写，但是只在设置了`g`修饰符时有意义。
> 2. `source`：返回正则表达式的字符串形式（不包括反斜杠），该属性只读。

### 方法

#### test()

验证字符串是否符合正则规则，如果有返回*true*，如果正则中有**g**，则每次都会从上一次结束位置开始向后匹配。另，我们还可以使用`lastIndex`来制定开始搜索的位置：

```javascript
var r = /x/g;
var s = '_x_x';

r.lastIndex = 4;
r.test(s) // false
```

请注意**lastIndex**只对同一个正则有效。

#### exec()

返回匹配结果，如果有匹配则返回一个数组，成员是每个匹配成功的字符串，否则返回`null`

如果正则表示式包含圆括号（即含有“组匹配”），则返回的数组会包括多个成员。第一个成员是整个匹配成功的结果，后面的成员就是圆括号对应的匹配成功的组。也就是说，第二个成员对应第一个括号，第三个成员对应第二个括号，以此类推。整个数组的`length`属性等于组匹配的数量再加1。

```javascript
var s = '_x_x';
var r = /_(x)/;

r.exec(s) // ["_x", "x"]
```

另外`exec`返回的数组还包含有两个属性，

> 1. *input*：原始字符串。
> 2. *index*：匹配成功开始的位置

我们可以在结果集之后调用这两个属性来获取我们想要的信息。

使用*exec*匹配的时候会一直匹配下去，直到匹配到最后一个字符，这时候`lastIndex`会返回**0**这表示指针又回到了字符串开始。下次匹配将会重新开始。

同时利用`g`修饰符允许多次匹配的特点，我们可以完成一次全部匹配，同时我们可以手动设置*lastIndex*来匹配的开始位置。

```javascript
var r = /a(b+)a/g;
var s = '_abbba_aba_';

while(true) {
  var match = r.exec(s);
  if (!match) break;
  console.log(match[1]);
}
// bbb
// b
```

## 字符串对象方法

> 1. `match()`：返回一个数组，成员是所有匹配的子字符串。
> 2. `search()`：按照给定的正则表达式进行搜索，返回一个整数，表示匹配开始的位置。
> 3. `replace()`：按照给定的正则表达式进行替换，返回替换后的字符串。
> 4. `split()`：按照给定规则进行字符串分割，返回一个数组，包含分割后的各个成员。

`match()`在匹配含有*g*修饰符的时候*lastIndex*是无效的。如果没有匹配到值则会返回**null**。

`search()`会忽略修饰符*g*，如果没有匹配到这回返回**-1**。

`replace()`用于替换，所以它可以接受两个参数，第一个是搜索模式*正则表达式*，第二个是替换的内容。如果使用修饰符*g*的话，原字符串中的所有匹配元素都会被替换掉。另外，我们还可以*使用$来指代所替换的内容*。

> 1. `$&` 指代匹配的子字符串。
> 2. `$`` 指代匹配结果前面的文本。
> 3. `$'` 指代匹配结果后面的文本。
> 4. `$n` 指代匹配成功的第`n`组内容，`n`是从1开始的自然数。
> 5. `$$` 指代美元符号`$`。

此外，我们还可以使用函数作为替换的内容，这时候函数的返回值就会替换掉匹配的内容，这个函数可以接受多个参数，第一个表示捕获的到的内容，第二个表示捕获到的组匹配，是三个开始表示捕获到的内容所在的位置，最后一个表示原字符串。





















































